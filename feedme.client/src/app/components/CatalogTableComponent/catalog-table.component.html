<div class="catalog-table">
  <div class="catalog-table__toolbar">
    <div class="catalog-table__tabs" role="tablist" aria-label="Выбор базы">
      <button
        type="button"
        role="tab"
        class="catalog-table__tab"
        [class.catalog-table__tab--active]="tab === 'baseA'"
        [attr.aria-selected]="tab === 'baseA'"
        (click)="onTabChange('baseA')"
      >
        База A
      </button>
      <button
        type="button"
        role="tab"
        class="catalog-table__tab"
        [class.catalog-table__tab--active]="tab === 'baseB'"
        [attr.aria-selected]="tab === 'baseB'"
        (click)="onTabChange('baseB')"
      >
        База B
      </button>
    </div>

    <button type="button" class="catalog-table__new-item">+ Новый товар</button>
  </div>

  <div class="catalog-table__container">
    <table class="catalog-table__table">
      <thead class="catalog-table__head">
        <tr class="catalog-table__head-row">
          <th
            scope="col"
            class="col-code"
            (click)="onSort('code')"
            [ngClass]="sortClass('code')"
          >
            <span>Код</span>
            <span class="sort-icon" aria-hidden="true"></span>
          </th>
          <th
            scope="col"
            class="col-name"
            (click)="onSort('name')"
            [ngClass]="sortClass('name')"
          >
            <span>Наименование</span>
            <span class="sort-icon" aria-hidden="true"></span>
          </th>
          <th
            scope="col"
            class="col-status"
            (click)="onSort('status')"
            [ngClass]="sortClass('status')"
          >
            <span>Статус</span>
            <span class="sort-icon" aria-hidden="true"></span>
          </th>
          <th
            scope="col"
            class="col-category"
            (click)="onSort('category')"
            [ngClass]="sortClass('category')"
          >
            <span>Категория</span>
            <span class="sort-icon" aria-hidden="true"></span>
          </th>
          <th
            scope="col"
            class="col-unit"
            (click)="onSort('unit')"
            [ngClass]="sortClass('unit')"
          >
            <span>Ед. изм.</span>
            <span class="sort-icon" aria-hidden="true"></span>
          </th>
          <th
            scope="col"
            class="col-supplier"
            (click)="onSort('supplier')"
            [ngClass]="sortClass('supplier')"
          >
            <span>Поставщик</span>
            <span class="sort-icon" aria-hidden="true"></span>
          </th>
          <th
            scope="col"
            class="col-price"
            (click)="onSort('price')"
            [ngClass]="sortClass('price')"
          >
            <span>Цена</span>
            <span class="sort-icon" aria-hidden="true"></span>
          </th>
          <th
            scope="col"
            class="col-date"
            (click)="onSort('lastDelivery')"
            [ngClass]="sortClass('lastDelivery')"
          >
            <span>Последняя поставка</span>
            <span class="sort-icon" aria-hidden="true"></span>
          </th>
          <th scope="col" class="col-flags">
            Флаги
          </th>
        </tr>
      </thead>
      <tbody class="catalog-table__body">
        <tr *ngFor="let item of items; trackBy: trackByCode" class="catalog-table__row">
          <td class="col-code">{{ item.code }}</td>
          <td class="col-name">{{ item.name }}</td>
          <td class="col-status">
            <span class="pill" [ngClass]="'pill--' + item.statusTone">{{ item.status }}</span>
          </td>
          <td class="col-category">{{ item.category }}</td>
          <td class="col-unit">{{ item.unit }}</td>
          <td class="col-supplier">{{ item.supplier }}</td>
          <td class="col-price text-right">{{ item.price | number: '1.0-2' }} ₽</td>
          <td class="col-date">{{ item.lastDelivery | date: 'dd.MM.yyyy' }}</td>
          <td class="col-flags">
            <ng-container *ngIf="item.flags.length; else noFlags">
              <span *ngFor="let flag of item.flags" class="flag">{{ flag }}</span>
            </ng-container>
            <ng-template #noFlags>
              <span class="flag flag--empty">Нет флагов</span>
            </ng-template>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

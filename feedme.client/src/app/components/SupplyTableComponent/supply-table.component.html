<div class="card supplies-filters">
  <div class="card__content p-4 flex flex-wrap items-center gap-3">
    <label class="filters-control filters-control--search">
      <span class="filters-control__label">–ü–æ–∏—Å–∫</span>
      <input
        type="search"
        class="input w-[320px]"
        placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É, SKU –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é"
        aria-label="–ü–æ–∏—Å–∫ –ø–æ –ø–æ—Å—Ç–∞–≤–∫–∞–º"
        [value]="searchQuery"
        #searchInput
        (input)="onSearchChange(searchInput.value)"
      />
    </label>

    <label class="filters-control">
      <span class="filters-control__label">–î–∞—Ç–∞ –æ—Ç</span>
      <input type="date" class="input w-[160px]" aria-label="–î–∞—Ç–∞ –ø—Ä–∏—Ö–æ–¥–∞ –æ—Ç" />
    </label>

    <label class="filters-control">
      <span class="filters-control__label">–î–∞—Ç–∞ –¥–æ</span>
      <input type="date" class="input w-[160px]" aria-label="–î–∞—Ç–∞ –ø—Ä–∏—Ö–æ–¥–∞ –¥–æ" />
    </label>

    <div class="filters-control multi-select">
      <span class="filters-control__label">–°–∫–ª–∞–¥</span>
      <div class="multi-select__control">
        <span class="chip">–ì–ª–∞–≤–Ω—ã–π —Å–∫–ª–∞–¥</span>
        <span class="chip">–ö—É—Ö–Ω—è</span>
      </div>
    </div>

    <div class="filters-control multi-select">
      <span class="filters-control__label">–°—Ç–∞—Ç—É—Å</span>
      <div class="multi-select__control">
        <span class="chip">–û–∫</span>
        <span class="chip chip--secondary">–°–∫–æ—Ä–æ —Å—Ä–æ–∫</span>
        <span class="chip chip--destructive">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ</span>
      </div>
    </div>

    <button type="button" class="btn btn-outline">–°–±—Ä–æ—Å</button>
    <button type="button" class="btn btn-secondary">–≠–∫—Å–ø–æ—Ä—Ç</button>
    <button type="button" class="btn btn-primary ml-auto" (click)="addSupply()">+ –ù–æ–≤–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞</button>
  </div>
</div>

<div class="table-container">
  <table class="supplies-table">
    <thead class="supplies-table__head sticky top-0 bg-background/90 backdrop-blur border-b shadow-[inset_0_-1px_0_0_var(--border)]">
      <tr class="h-11 align-middle">
        <th class="w-[40px]" scope="col">
          <input type="checkbox" class="checkbox" aria-label="–í—ã–±—Ä–∞—Ç—å –≤—Å–µ –ø–æ—Å—Ç–∞–≤–∫–∏" />
        </th>
        <th scope="col" class="text-sm font-medium">‚Ññ –¥–æ–∫.</th>
        <th scope="col" class="text-sm font-medium">–î–∞—Ç–∞ –ø—Ä–∏—Ö–æ–¥–∞</th>
        <th scope="col" class="text-sm font-medium">–°–∫–ª–∞–¥</th>
        <th scope="col" class="text-sm font-medium">–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π</th>
        <th scope="col" class="text-sm font-medium">SKU</th>
        <th scope="col" class="text-sm font-medium">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
        <th scope="col" class="text-sm font-medium text-right">–ö–æ–ª-–≤–æ</th>
        <th scope="col" class="text-sm font-medium text-center">–°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏</th>
        <th scope="col" class="text-sm font-medium">–ü–æ—Å—Ç–∞–≤—â–∏–∫</th>
        <th scope="col" class="text-sm font-medium">–°—Ç–∞—Ç—É—Å</th>
        <th scope="col" class="w-[176px] text-right">
          <span class="sr-only">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</span>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of paginatedData" class="hover:bg-muted/40 odd:bg-muted/10 h-11 align-middle">
        <td class="w-[40px]">
          <input type="checkbox" class="checkbox" aria-label="–í—ã–±—Ä–∞—Ç—å –ø–æ—Å—Ç–∞–≤–∫—É" />
        </td>
        <td class="font-mono text-xs">
          {{ item.documentNumber || item.id || '‚Äî' }}
        </td>
        <td class="text-center">
          {{ item.arrivalDate || item.createdAt || item.date || '‚Äî' }}
        </td>
        <td>
          <span class="truncate" [title]="item.warehouse || item.location || '‚Äî'">
            {{ item.warehouse || item.location || '‚Äî' }}
          </span>
        </td>
        <td>
          <span class="truncate" [title]="item.responsible || item.manager || '‚Äî'">
            {{ item.responsible || item.manager || '‚Äî' }}
          </span>
        </td>
        <td class="font-mono text-xs">
          {{ item.sku || item.code || '‚Äî' }}
        </td>
        <td>
          <span class="truncate" [title]="item.productName || item.name || '‚Äî'">
            {{ item.productName || item.name || '‚Äî' }}
          </span>
        </td>
        <td class="text-right">
          {{ (item.stock ?? item.quantity ?? '‚Äî') }}
        </td>
        <td class="text-center">
          {{ item.expiryDate ? (item.expiryDate | date: 'dd.MM.yyyy') : '‚Äî' }}
        </td>
        <td>
          <span class="truncate" [title]="item.supplier || item.vendor || '‚Äî'">
            {{ item.supplier || item.vendor || '‚Äî' }}
          </span>
        </td>
        <td>
          <ng-container *ngIf="(item.status || item.state || '–û–∫') as status">
            <span
              class="badge min-w-[88px] justify-center"
              [ngClass]="status | statusBadgeClass"
            >
              {{ status }}
            </span>
          </ng-container>
        </td>
        <td class="w-[176px] text-right">
          <div class="row-actions" role="group" aria-label="–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è">
            <button
              type="button"
              class="row-action"
              aria-label="–°–ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç–∞–≤–∫—É"
              (click)="writeOff.emit(item)"
            >
              <span aria-hidden="true">üóë</span>
            </button>
            <button
              type="button"
              class="row-action"
              aria-label="–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ø–æ—Å—Ç–∞–≤–∫—É"
              (click)="move.emit(item)"
            >
              <span aria-hidden="true">‚áÑ</span>
            </button>
            <button
              type="button"
              class="row-action"
              aria-label="–†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –ø–æ—Å—Ç–∞–≤–∫—É"
              (click)="print.emit(item)"
            >
              <span aria-hidden="true">üñ®</span>
            </button>
            <button type="button" class="icon-btn" aria-label="–ú–µ–Ω—é" (click)="onSettingsClick.emit(item)">
              ‚ãØ
            </button>
          </div>
        </td>
      </tr>
      <tr *ngIf="paginatedData.length === 0">
        <td colspan="12" class="no-data">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</td>
      </tr>
    </tbody>
  </table>
</div>

<!-- TODO: toggle by data -->
<app-empty
  class="mt-6 block"
  title="–ù–µ—Ç –ø–æ—Å—Ç–∞–≤–æ–∫"
  subtitle="–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –ø–æ—Å—Ç–∞–≤–∫—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –µ—ë –≤ —Å–ø–∏—Å–∫–µ."
  ctaText="+ –ù–æ–≤–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞"
></app-empty>

<div class="table-footer flex items-center p-3 border-t text-sm bg-muted/40 shadow-sm">
  <div class="table-footer__summary text-muted-foreground">
    –ü–æ–∫–∞–∑–∞–Ω–æ {{ paginatedData.length }} –ø–æ—Å—Ç–∞–≤–æ–∫ ¬∑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ currentPage }} –∏–∑ {{ totalPages }}
  </div>
  <div class="ml-auto flex gap-2">
    <button type="button" class="btn btn-outline btn-sm" (click)="prevPage()" [disabled]="currentPage === 1">
      –ù–∞–∑–∞–¥
    </button>
    <button type="button" class="btn btn-outline btn-sm" (click)="nextPage()" [disabled]="currentPage === totalPages">
      –î–∞–ª–µ–µ
    </button>
  </div>
</div>

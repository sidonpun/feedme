<div class="popup-backdrop">
  <div class="popup-content">
    <button class="close-btn" (click)="cancel()">×</button>
    <h2>Новый товар</h2>
    <form [formGroup]="form">
      <div class="form-grid">
        <div class="input-container">
          <label>Название товара</label>
          <input type="text"
                 formControlName="productName"
                 autocomplete="off">
          <ng-container *ngIf="!selectedProduct && (suggestions$ | async) as suggestions">
            <div class="suggestions-container" *ngIf="suggestions.length">
              <div class="suggestion-item" *ngFor="let item of suggestions" (click)="selectSuggestion(item)">
                {{ item.name }}
              </div>
            </div>
          </ng-container>
        </div>

        <ng-container *ngIf="selectedProduct">
          <div class="input-container">
            <label>Количество</label>
            <input type="number" formControlName="stock" required>
          </div>

          <div class="input-container">
            <label>Срок годности</label>
            <input type="date" formControlName="expiryDate" required>
          </div>
        </ng-container>
      </div>

      <div class="popup-buttons">
        <button type="button" class="cancel-btn" (click)="cancel()">Отмена</button>
        <button type="button"
                class="save-btn"
                [disabled]="!selectedProduct || form.invalid"
                (click)="handleSubmit()">Сохранить</button>
      </div>
    </form>
  </div>
</div>
